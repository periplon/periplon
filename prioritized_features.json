[
  {
    "rank": 1,
    "tier": "CRITICAL",
    "name": "DSL Executor",
    "module": "dsl-executor",
    "file_path": "src/dsl/executor.rs",
    "priority_score": 1061.0,
    "importance": 10,
    "current_coverage": 22.0,
    "target_coverage": 80.0,
    "gap_percent": 58.0,
    "lines_covered": 403,
    "lines_total": 1830,
    "lines_needed": 1061,
    "impact_percent": 11.0,
    "effort_estimate": "3-4 weeks",
    "roi": "highest",
    "test_priorities": [
      "Basic task execution (sequential, parallel)",
      "Dependency resolution and topological sorting",
      "Loop constructs (for, foreach, while, repeat, polling)",
      "State checkpointing and resumption",
      "Error handling and recovery",
      "Agent communication via message bus",
      "Notification delivery triggers",
      "Variable context management",
      "Timeout and cancellation handling",
      "Subflow execution"
    ],
    "reason": "Central orchestrator for all workflow execution. Single point of failure for entire DSL system. Largest file in codebase (19% of total)."
  },
  {
    "rank": 2,
    "tier": "HIGH",
    "name": "Subprocess Transport",
    "module": "adapters-secondary",
    "file_path": "src/adapters/secondary/subprocess_transport.rs",
    "priority_score": 146.8,
    "importance": 10,
    "current_coverage": 0.9,
    "target_coverage": 80.0,
    "gap_percent": 79.1,
    "lines_covered": 2,
    "lines_total": 229,
    "lines_needed": 181,
    "impact_percent": 1.9,
    "effort_estimate": "1-2 weeks",
    "roi": "high",
    "test_priorities": [
      "Process spawning and lifecycle management",
      "NDJSON serialization/deserialization",
      "Stdin/stdout communication",
      "Timeout scenarios",
      "Process crash handling",
      "Malformed message handling",
      "Version compatibility checks",
      "CLI discovery logic"
    ],
    "reason": "Critical boundary layer between SDK and external CLI. Production risk: transport failures = complete system failure."
  },
  {
    "rank": 3,
    "tier": "HIGH",
    "name": "Application Query",
    "module": "application",
    "file_path": "src/application/query.rs",
    "priority_score": 43.9,
    "importance": 9,
    "current_coverage": 25.6,
    "target_coverage": 80.0,
    "gap_percent": 54.4,
    "lines_covered": 42,
    "lines_total": 164,
    "lines_needed": 89,
    "impact_percent": 0.9,
    "effort_estimate": "3-5 days",
    "roi": "medium",
    "test_priorities": [
      "Query lifecycle end-to-end",
      "Hook invocation (on_start, on_complete, on_error)",
      "Permission callback integration",
      "Multi-turn conversation handling",
      "Error propagation from transport",
      "Timeout handling",
      "Session management integration"
    ],
    "reason": "Main orchestration logic coordinating domain, adapters, and infrastructure. Impacts all user-facing operations."
  },
  {
    "rank": 4,
    "tier": "HIGH",
    "name": "SDK Client",
    "module": "adapters-primary",
    "file_path": "src/adapters/primary/sdk_client.rs",
    "priority_score": 42.5,
    "importance": 9,
    "current_coverage": 0.0,
    "target_coverage": 80.0,
    "gap_percent": 80.0,
    "lines_covered": 0,
    "lines_total": 55,
    "lines_needed": 44,
    "impact_percent": 0.5,
    "effort_estimate": "2-3 days",
    "roi": "high",
    "test_priorities": [
      "SDK client initialization",
      "Multi-turn conversation flow",
      "Session management",
      "Permission callback handling",
      "Error handling and propagation",
      "Stream handling"
    ],
    "reason": "Public API that users directly interact with. Zero coverage = high risk for breaking changes. Entry point to entire SDK."
  },
  {
    "rank": 5,
    "tier": "HIGH",
    "name": "Query Function",
    "module": "adapters-primary",
    "file_path": "src/adapters/primary/query_fn.rs",
    "priority_score": 42.5,
    "importance": 9,
    "current_coverage": 0.0,
    "target_coverage": 80.0,
    "gap_percent": 80.0,
    "lines_covered": 0,
    "lines_total": 19,
    "lines_needed": 15,
    "impact_percent": 0.2,
    "effort_estimate": "1 day",
    "roi": "high",
    "test_priorities": [
      "Simple query() function test",
      "Error handling and propagation",
      "Stream handling",
      "Default options behavior"
    ],
    "reason": "Public API for one-shot queries. Entry point to SDK. Zero coverage."
  },
  {
    "rank": 6,
    "tier": "HIGH",
    "name": "DSL Validator",
    "module": "dsl-validator",
    "file_path": "src/dsl/validator.rs",
    "priority_score": 28.3,
    "importance": 8,
    "current_coverage": 58.3,
    "target_coverage": 80.0,
    "gap_percent": 21.7,
    "lines_covered": 455,
    "lines_total": 781,
    "lines_needed": 169,
    "impact_percent": 1.8,
    "effort_estimate": "1 week",
    "roi": "high",
    "test_priorities": [
      "Circular dependency detection (simple & complex)",
      "Undefined agent references",
      "Undefined task references in dependencies",
      "Invalid variable syntax",
      "Undefined variable references ($scope.var)",
      "Invalid loop constructs",
      "Invalid notification channels",
      "Missing required fields",
      "Type validation (string vs number)",
      "Deep nesting validation"
    ],
    "reason": "Safety-critical component preventing invalid workflows. Already at 58% - achievable target."
  },
  {
    "rank": 7,
    "tier": "HIGH",
    "name": "Git Source Integration",
    "module": "dsl-predefined-tasks",
    "file_path": "src/dsl/predefined_tasks/sources/git.rs",
    "priority_score": 19.7,
    "importance": 8,
    "current_coverage": 19.1,
    "target_coverage": 80.0,
    "gap_percent": 60.9,
    "lines_covered": 22,
    "lines_total": 115,
    "lines_needed": 93,
    "impact_percent": 1.0,
    "effort_estimate": "1 week",
    "roi": "medium",
    "test_priorities": [
      "Git clone operations",
      "Branch/tag checkout",
      "Repository validation",
      "Network error handling",
      "Authentication (SSH, HTTPS)",
      "Submodule handling",
      "Shallow clone support"
    ],
    "reason": "External system integration for task reuse ecosystem. Important for predefined tasks feature."
  },
  {
    "rank": 8,
    "tier": "HIGH",
    "name": "DSL Parser",
    "module": "dsl-parser",
    "file_path": "src/dsl/parser.rs",
    "priority_score": 12.3,
    "importance": 8,
    "current_coverage": 13.2,
    "target_coverage": 80.0,
    "gap_percent": 66.8,
    "lines_covered": 10,
    "lines_total": 76,
    "lines_needed": 50,
    "impact_percent": 0.5,
    "effort_estimate": "2-3 days",
    "roi": "medium",
    "test_priorities": [
      "Invalid YAML syntax handling",
      "Missing required fields detection",
      "Type mismatch errors",
      "Unknown field warnings",
      "Complex nested structures",
      "Edge cases (empty arrays, null values)"
    ],
    "reason": "First line of defense against malformed YAML. Safety-critical parsing logic."
  },
  {
    "rank": 9,
    "tier": "MEDIUM",
    "name": "Options Module",
    "module": "other",
    "file_path": "src/options.rs",
    "priority_score": 5.3,
    "importance": 7,
    "current_coverage": 0.0,
    "target_coverage": 80.0,
    "gap_percent": 80.0,
    "lines_covered": 0,
    "lines_total": 26,
    "lines_needed": 21,
    "impact_percent": 0.2,
    "effort_estimate": "2 hours",
    "roi": "high",
    "test_priorities": [
      "AgentOptions initialization",
      "Permission mode defaults",
      "System prompt handling",
      "Tool allowlist configuration"
    ],
    "reason": "Quick win. Core configuration module impacting all agent initialization."
  },
  {
    "rank": 10,
    "tier": "MEDIUM",
    "name": "Domain Session",
    "module": "domain",
    "file_path": "src/domain/session.rs",
    "priority_score": 4.8,
    "importance": 7,
    "current_coverage": 0.0,
    "target_coverage": 80.0,
    "gap_percent": 80.0,
    "lines_covered": 0,
    "lines_total": 16,
    "lines_needed": 13,
    "impact_percent": 0.1,
    "effort_estimate": "2-3 hours",
    "roi": "high",
    "test_priorities": [
      "Session lifecycle (create, update, close)",
      "Session state management",
      "ID generation"
    ],
    "reason": "Quick win. Core domain logic for session management."
  },
  {
    "rank": 11,
    "tier": "MEDIUM",
    "name": "DSL NL Generator",
    "module": "dsl-nl-generator",
    "file_path": "src/dsl/nl_generator.rs",
    "priority_score": 6.8,
    "importance": 5,
    "current_coverage": 9.6,
    "target_coverage": 60.0,
    "gap_percent": 50.4,
    "lines_covered": 16,
    "lines_total": 166,
    "lines_needed": 84,
    "impact_percent": 0.9,
    "effort_estimate": "3-5 days",
    "roi": "medium",
    "test_priorities": [
      "Mock LLM responses",
      "YAML output validation",
      "Error handling for malformed output",
      "Natural language parsing logic"
    ],
    "reason": "AI-powered feature (less deterministic). Not critical path. Can be mocked for tests."
  },
  {
    "rank": 12,
    "tier": "LOW",
    "name": "TUI Components",
    "module": "tui",
    "file_path": "src/tui/",
    "priority_score": 3.5,
    "importance": 3,
    "current_coverage": 0.0,
    "target_coverage": 60.0,
    "gap_percent": 60.0,
    "lines_covered": 0,
    "lines_total": 183,
    "lines_needed": 110,
    "impact_percent": 1.1,
    "effort_estimate": "2-3 weeks",
    "roi": "low",
    "test_priorities": [
      "UI component rendering",
      "Event handling",
      "State management",
      "Error display"
    ],
    "reason": "Feature-gated optional UI. Not critical path. Requires complex test harness setup (ratatui)."
  },
  {
    "rank": 13,
    "tier": "LOW",
    "name": "Server Components",
    "module": "server",
    "file_path": "src/server/",
    "priority_score": 1.2,
    "importance": 4,
    "current_coverage": 0.0,
    "target_coverage": 60.0,
    "gap_percent": 60.0,
    "lines_covered": 0,
    "lines_total": 47,
    "lines_needed": 28,
    "impact_percent": 0.3,
    "effort_estimate": "1 week",
    "roi": "low",
    "test_priorities": [
      "Server initialization",
      "Request handling",
      "Database integration",
      "Error handling"
    ],
    "reason": "Feature-gated optional deployment mode. Requires Docker infrastructure (PostgreSQL, Redis, S3)."
  }
]
